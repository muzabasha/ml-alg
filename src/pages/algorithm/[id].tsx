/**\n * Algorithm Detail Page\n * Main learning interface for a specific algorithm\n * Displays all sections: Introduction, Math, Implementation, Evaluation, etc.\n */\n\nimport React, { useState, useEffect } from 'react'; \nimport { useRouter } from 'next/router'; \nimport Head from 'next/head'; \nimport AlgorithmSelector from '@/components/AlgorithmSelector'; \nimport ContentAccordion from '@/components/ContentAccordion'; \nimport { CodeToggle } from '@/components/CodeBlock'; \nimport { MathRenderer, EquationBlock } from '@/components/MathRenderer'; \nimport { ScatterPlot, ConfusionMatrix } from '@/components/Visualization'; \nimport algorithmData from '@/utils/algorithmData'; \n\ninterface AlgorithmPageProps { \n  algorithm: any; \n } \n\nconst AlgorithmPage: React.FC<AlgorithmPageProps> = ({ algorithm }) => { \n  const router = useRouter(); \n  const { id } = router.query; \n  const [activeTab, setActiveTab] = useState<'learn' | 'practice' | 'quiz'>('learn'); \n  const [isExecuting, setIsExecuting] = useState(false); \n\n  if (!algorithm) { \n    return <div className=\"p-8\">Loading...</div>;\n  }\n\n  const sections = algorithm.sections;\n\n  // Build accordion sections\n  const accordionSections = [\n    {\n      id: 'introduction',\n      title: 'Introduction',\n      icon: 'üìö',\n      isDefault: true,\n      content: (\n        <div className=\"space-y-4\">\n          <div className=\"p-4 bg-blue-50 border-l-4 border-blue-500 rounded\">\n            <p className=\"text-slate-700 leading-relaxed\">{sections.introduction.plainLanguage}</p>\n          </div>\n\n          <div>\n            <h4 className=\"font-semibold text-slate-900 mb-2\">üéØ Real-World Analogy</h4>\n            <p className=\"text-slate-700\">{sections.introduction.realWorldAnalogy}</p>\n          </div>\n\n          <div>\n            <h4 className=\"font-semibold text-slate-900 mb-2\">üìç Where & Why</h4>\n            <p className=\"text-slate-700\">{sections.introduction.whereAndWhy}</p>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"p-3 bg-green-50 rounded\">\n              <h5 className=\"font-semibold text-green-900 mb-2\">‚úÖ Strengths</h5>\n              <ul className=\"text-sm text-green-800 space-y-1\">\n                {sections.introduction.strengths.map((s: string, i: number) => (\n                  <li key={i}>‚Ä¢ {s}</li>\n                ))}\n              </ul>\n            </div>\n            <div className=\"p-3 bg-red-50 rounded\">\n              <h5 className=\"font-semibold text-red-900 mb-2\">‚ö†Ô∏è Limitations</h5>\n              <ul className=\"text-sm text-red-800 space-y-1\">\n                {sections.introduction.limitations.map((l: string, i: number) => (\n                  <li key={i}>‚Ä¢ {l}</li>\n                ))}\n              </ul>\n            </div>\n          </div>\n        </div>\n      ),\n    },\n    {\n      id: 'math',\n      title: 'Mathematical Model',\n      icon: '‚àë',\n      content: (\n        <div className=\"space-y-6\">\n          <p className=\"text-slate-700\">{sections.mathematical_model.introduction}</p>\n\n          {sections.mathematical_model.equations.map((eq: any, i: number) => (\n            <EquationBlock\n              key={i}\n              name={eq.name}\n              latex={eq.latex}\n              explanation={eq.explanation}\n            />\n          ))}\n\n          <div className=\"p-4 bg-slate-50 rounded\">\n            <h4 className=\"font-semibold text-slate-900 mb-3\">Key Terms</h4>\n            <dl className=\"space-y-2\">\n              {Object.entries(sections.mathematical_model.keyTerms).map(([term, def]: any) => (\n                <div key={term}>\n                  <dt className=\"font-semibold text-slate-900\">{term}</dt>\n                  <dd className=\"text-slate-700 ml-4\">{def}</dd>\n                </div>\n              ))}\n            </dl>\n          </div>\n\n          <div className=\"p-4 bg-amber-50 border-l-4 border-amber-500 rounded\">\n            <h4 className=\"font-semibold text-amber-900 mb-2\">üí° Intuition</h4>\n            <p className=\"text-slate-700\">{sections.mathematical_model.intuition}</p>\n          </div>\n        </div>\n      ),\n    },\n    {\n      id: 'sample',\n      title: 'Sample Input & Output',\n      icon: 'üìä',\n      content: (\n        <div className=\"space-y-6\">\n          <p className=\"text-slate-700\">{sections.sample_io.description}</p>\n\n          <div>\n            <h4 className=\"font-semibold text-slate-900 mb-2\">Input Data</h4>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full border-collapse border border-slate-300\">\n                <thead className=\"bg-slate-100\">\n                  <tr>\n                    {Object.keys(sections.sample_io.input.table[0]).map((key) => (\n                      <th key={key} className=\"border border-slate-300 px-4 py-2 text-left\">\n                        {key}\n                      </th>\n                    ))}\n                  </tr>\n                </thead>\n                <tbody>\n                  {sections.sample_io.input.table.map((row: any, i: number) => (\n                    <tr key={i} className=\"hover:bg-slate-50\">\n                      {Object.values(row).map((val: any, j: number) => (\n                        <td key={j} className=\"border border-slate-300 px-4 py-2\">\n                          {val}\n                        </td>\n                      ))}\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          <div>\n            <h4 className=\"font-semibold text-slate-900 mb-2\">Output</h4>\n            <pre className=\"bg-slate-100 p-4 rounded overflow-x-auto text-sm\">\n              {JSON.stringify(sections.sample_io.output, null, 2)}\n            </pre>\n          </div>\n        </div>\n      ),\n    },\n    {\n      id: 'implementation',\n      title: 'Implementation',\n      icon: 'üíª',\n      content: (\n        <div className=\"space-y-6\">\n          <CodeToggle\n            scratchCode={sections.implementation_scratch.code}\n            apiCode={sections.implementation_api.code}\n            scratchTitle=\"From Scratch (NumPy)\"\n            apiTitle=\"Using scikit-learn\"\n            scratchDescription={sections.implementation_scratch.description}\n            apiDescription={sections.implementation_api.description}\n            comparison={sections.implementation_api.comparison}\n            isExecuting={isExecuting}\n          />\n        </div>\n      ),\n    },\n    {\n      id: 'evaluation',\n      title: 'Model Evaluation',\n      icon: 'üìà',\n      content: (\n        <div className=\"space-y-6\">\n          <div className=\"p-4 bg-blue-50 border-l-4 border-blue-500 rounded\">\n            <p className=\"text-slate-700\">{sections.evaluation.why}</p>\n          </div>\n\n          {sections.evaluation.metrics.map((metric: any, i: number) => (\n            <div key={i} className=\"p-4 bg-slate-50 rounded\">\n              <h4 className=\"font-semibold text-slate-900 mb-2\">{metric.name}</h4>\n              <div className=\"mb-2\">\n                <MathRenderer latex={metric.formula} display={true} />\n              </div>\n              <p className=\"text-slate-700 mb-2\">{metric.interpretation}</p>\n              <p className=\"text-sm text-slate-600\">Example: {metric.example}</p>\n            </div>\n          ))}\n        </div>\n      ),\n    },\n    {\n      id: 'improvements',\n      title: 'Improvements',\n      icon: 'üöÄ',\n      content: (\n        <div className=\"space-y-4\">\n          {Object.entries(sections.improvements).map(([category, items]: any) => (\n            <div key={category}>\n              <h4 className=\"font-semibold text-slate-900 mb-2 capitalize\">{category.replace(/_/g, ' ')}</h4>\n              <ul className=\"space-y-2 ml-4\">\n                {items.map((item: string, i: number) => (\n                  <li key={i} className=\"text-slate-700\">‚Ä¢ {item}</li>\n                ))}\n              </ul>\n            </div>\n          ))}\n        </div>\n      ),\n    },\n  ];\n\n  return (\n    <>\n      <Head>\n        <title>{algorithm.name} - ML Learning Platform</title>\n      </Head>\n\n      <div className=\"flex h-screen bg-slate-50\">\n        {/* Sidebar */}\n        <AlgorithmSelector selectedId={id} />\n\n        {/* Main Content */}\n        <main className=\"flex-1 overflow-y-auto\">\n          <div className=\"max-w-4xl mx-auto p-8\">\n            {/* Header */}\n            <div className=\"mb-8\">\n              <div className=\"flex items-center gap-3 mb-2\">\n                <span className=\"text-4xl\">ü§ñ</span>\n                <h1 className=\"text-4xl font-bold text-slate-900\">{algorithm.name}</h1>\n              </div>\n              <p className=\"text-slate-600 mb-4\">{algorithm.category}</p>\n              <div className=\"flex gap-4\">\n                <span className=\"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold\">\n                  {algorithm.difficulty}\n                </span>\n                <span className=\"px-3 py-1 bg-slate-200 text-slate-800 rounded-full text-sm\">\n                  ‚è±Ô∏è {algorithm.estimatedTime}\n                </span>\n              </div>\n            </div>\n\n            {/* Content Accordion */}\n            <ContentAccordion sections={accordionSections} />\n          </div>\n        </main>\n      </div>\n    </>\n  );\n};\n\nexport async function getStaticProps(context: any) {\n  const { id } = context.params;\n  const algorithm = algorithmData[id] || null;\n\n  return {\n    props: { algorithm },\n    revalidate: 3600, // Revalidate every hour\n  };\n}\n\nexport async function getStaticPaths() {\n  const paths = Object.keys(algorithmData).map((id) => ({\n    params: { id },\n  }));\n\n  return {\n    paths,\n    fallback: 'blocking',\n  };\n}\n\nexport default AlgorithmPage;
